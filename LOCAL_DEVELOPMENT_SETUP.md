# Local Development Setup for ShortSelling.eu

## Problem
The project was configured for Railway deployment only. When trying to run locally, the backend failed because:
1. No `.env` file existed locally
2. The existing configuration assumed Railway environment variables
3. Any local `.env` file would be committed and break Railway deployment

## Solution
Created a separate local development configuration that doesn't interfere with Railway deployment.

## What Was Created

### 1. `.env.local` 
- Local development environment variables
- Uses local PostgreSQL connection (`postgresql://jpdib:jpdib@localhost:5432/shortselling`)
- DEBUG mode enabled
- Won't be committed to git

### 2. `scripts/start_local.py`
- Local development startup script
- Automatically copies `.env.local` to `.env` when running locally
- Checks conda environment and database connection
- Starts FastAPI with hot reload on localhost:8000

### 3. Updated `.gitignore`
- Added `.env` and `.env.local` to prevent committing local config
- Added comprehensive Python, database, and IDE ignores
- Ensures Railway deployment remains unaffected

## How It Works

### Local Development Workflow:
```bash
# 1. Start PostgreSQL
"C:\Users\jpdib\anaconda3\envs\short_selling\Library\bin\pg_ctl.exe" -D "C:\Users\jpdib\anaconda3\envs\short_selling\Library\postgresql\data" start

# 2. Start Backend (in one terminal)
conda activate short_selling
python scripts/start_local.py

# 3. Start Frontend (in another terminal)  
cd frontend
npm start
```

### Railway Deployment (Unchanged):
- Railway reads environment variables from its own configuration
- No `.env` file is committed, so Railway config is unaffected
- Dockerfile and deployment process remain exactly the same

## Benefits

### ✅ Separation of Concerns:
- Local development uses local database and settings
- Railway deployment uses Railway environment variables
- No interference between environments

### ✅ Safe Development:
- Edit code locally on `localhost:3000`
- Test changes with local database
- Commit only when ready
- Railway auto-deploys from GitHub

### ✅ Hot Reload:
- Backend: FastAPI with reload enabled
- Frontend: React development server
- Instant feedback on code changes

### ✅ No Risk to Production:
- Local `.env` never committed to repository
- Railway deployment configuration untouched
- Production data and deployment remain stable

## File Structure
```
shortselling.eu/
├── .env.local              # Local development config (not committed)
├── .env                    # Generated by start_local.py (not committed)  
├── .gitignore              # Updated to ignore .env files
├── scripts/
│   ├── start.py            # Railway production startup
│   └── start_local.py      # Local development startup
└── ...
```

## Why This Approach

### Alternative Rejected: Direct .env Creation
- ❌ Would be committed and break Railway
- ❌ Would require manual environment switching
- ❌ Risk of production configuration conflicts

### Alternative Rejected: Environment-specific Scripts
- ❌ More complex setup
- ❌ Harder to maintain
- ❌ Still risk of configuration leaks

### ✅ Chosen Approach Benefits:
- Simple and foolproof
- Clear separation between local and production
- Automatic environment setup
- Zero risk to production deployment
- Easy to understand and maintain

## Next Steps
1. Test local development setup
2. Verify Railway deployment still works
3. Document any additional local development needs
4. Consider adding local database initialization if needed

---

**Created**: 2025-01-30  
**Purpose**: Enable local development without affecting Railway deployment  
**Status**: Ready for testing